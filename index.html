<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <!-- Security Headers (Simplified for compatibility) -->
    <meta name="referrer" content="strict-origin-when-cross-origin" />
    <meta http-equiv="X-Content-Type-Options" content="nosniff" />
    
    <title>iBlog</title>
    
    <!-- Anti-Clickjacking (Frame-busting) -->
    <script>
      if (window.self !== window.top) {
        window.top.location = window.self.location;
      }
    </script>

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://unpkg.com/@uiw/react-md-editor/markdown-editor.css" />
    <link rel="stylesheet" href="https://unpkg.com/@uiw/react-markdown-preview/markdown.css" />
    <script>
      tailwind.config = {
        darkMode: 'class', // Enable class-based dark mode
        theme: {
          extend: {
            colors: {
              apple: {
                // Map to CSS variables for dynamic theming (Light / Eye Protection)
                bg: 'var(--apple-bg)',
                card: 'var(--apple-card)',
                blue: 'var(--apple-blue)',
                text: 'var(--apple-text)',
                subtext: 'var(--apple-subtext)',
                gray: 'var(--apple-gray)',
                
                // Keep explicit dark mode colors for `dark:` utility overrides
                'dark-bg': '#000000',
                'dark-card': '#1c1c1e',
                'dark-text': '#f5f5f7',
                'dark-subtext': '#a1a1a6',
              }
            },
            fontFamily: {
              sans: ['-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'Helvetica', 'Arial', 'sans-serif']
            },
            // iOS-like Smooth Animation Config
            transitionTimingFunction: {
              'ios': 'cubic-bezier(0.32, 0.72, 0, 1)', // Apple-style easing
              'ios-spring': 'cubic-bezier(0.175, 0.885, 0.32, 1.1)', // Bouncy effect
            },
            animation: {
              'spin-slow': 'spin 12s linear infinite',
              'page-enter': 'pageEnter 0.5s cubic-bezier(0.32, 0.72, 0, 1) forwards',
              'modal-spring': 'modalSpring 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.1) forwards',
              'slide-up-ios': 'slideUpIos 0.4s cubic-bezier(0.32, 0.72, 0, 1) forwards',
              'fade-in-ios': 'fadeInIos 0.3s ease-out forwards',
            },
            keyframes: {
              pageEnter: {
                '0%': { opacity: 0, transform: 'scale(0.98) translateY(10px)' },
                '100%': { opacity: 1, transform: 'scale(1) translateY(0)' },
              },
              modalSpring: {
                '0%': { opacity: 0, transform: 'scale(0.9) translateY(20px)' },
                '100%': { opacity: 1, transform: 'scale(1) translateY(0)' },
              },
              slideUpIos: {
                '0%': { transform: 'translateY(100%)' },
                '100%': { transform: 'translateY(0)' },
              },
              fadeInIos: {
                '0%': { opacity: 0 },
                '100%': { opacity: 1 },
              },
              slideUpFade: { // Keeping original just in case
                '0%': { opacity: 0, transform: 'translateY(10px)' },
                '100%': { opacity: 1, transform: 'translateY(0)' },
              }
            }
          }
        }
      }
    </script>
    <style>
      /* CSS Variables for Theming */
      :root {
        /* Default Light Mode - slightly darkened background for better card contrast */
        --apple-bg: #f2f2f7; 
        --apple-card: #ffffff;
        --apple-blue: #0071e3;
        --apple-text: #1d1d1f;
        --apple-subtext: #86868b;
        --apple-gray: #6e6e73;
        --apple-border: rgba(0,0,0,0.12); /* Slightly darker border */
      }

      /* Eye Protection Mode (Warm / Paper-like) */
      .eye-protection {
        --apple-bg: #f3ebd6;      /* 暖杏色背景 */
        --apple-card: #fdfbf4;    /* 极淡的暖白卡片 */
        --apple-blue: #3d7a9c;    /* 稍微柔和的蓝色，减少刺眼 */
        --apple-text: #4a453a;    /* 深褐灰色文字，比纯黑柔和 */
        --apple-subtext: #969082; /* 暖灰色副文本 */
        --apple-gray: #a39e93;
        --apple-border: rgba(74, 69, 58, 0.1);
      }

      /* Globally Hide Native Scrollbars but allow scrolling */
      html, body, * {
        scrollbar-width: none; /* Firefox */
        -ms-overflow-style: none; /* IE/Edge */
      }

      /* Chrome/Safari/Webkit */
      *::-webkit-scrollbar {
        display: none;
        width: 0;
        height: 0;
        background: transparent;
      }

      /* Dark mode overrides for body */
      body.dark {
        background-color: #000000;
        color: #f5f5f7;
        --apple-border: rgba(255,255,255,0.1);
      }
      
      /* Smooth background transition for whole page */
      body {
        transition: background-color 0.5s ease, color 0.5s ease;
      }
      
      /* Utility for masking text/images */
      .mask-gradient {
        mask-image: linear-gradient(to bottom, black 80%, transparent 100%);
      }

      /* --- Enhanced Markdown Styles (Apple Style) --- */
      .w-md-editor {
        border-radius: 16px !important;
        box-shadow: none !important;
        border: 1px solid var(--apple-border) !important;
        overflow: hidden;
      }
      body.dark .w-md-editor {
        border-color: rgba(255,255,255,0.1) !important;
      }
      
      .w-md-editor-toolbar {
        border-bottom: 1px solid var(--apple-border) !important;
        padding: 10px 12px !important;
        background-color: var(--apple-card) !important;
      }
      body.dark .w-md-editor-toolbar {
        border-bottom-color: rgba(255,255,255,0.1) !important;
        background-color: #1c1c1e !important;
      }

      /* Typographical Improvements for the Content */
      .wmde-markdown {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif !important;
        background-color: transparent !important;
        color: inherit !important;
        font-size: 1.05rem !important;
        line-height: 1.8 !important;
        letter-spacing: -0.01em;
      }

      /* Headings */
      .wmde-markdown h1, .wmde-markdown h2, .wmde-markdown h3, .wmde-markdown h4 {
        border-bottom: none !important;
        font-weight: 700 !important;
        color: var(--apple-text);
        margin-top: 2em !important;
        margin-bottom: 0.8em !important;
        line-height: 1.3 !important;
        scroll-margin-top: 100px; /* Offset for sticky header */
      }
      body.dark .wmde-markdown h1, body.dark .wmde-markdown h2 { color: #f5f5f7 !important; }
      
      .wmde-markdown h1 { font-size: 2.2em !important; letter-spacing: -0.025em; }
      .wmde-markdown h2 { font-size: 1.75em !important; }
      .wmde-markdown h3 { font-size: 1.4em !important; }

      /* Paragraphs */
      .wmde-markdown p {
        margin-bottom: 1.5em !important;
        color: inherit !important;
      }

      /* Code Blocks */
      .wmde-markdown pre {
        background-color: #f1f5f9 !important; /* Slightly darker in light mode for contrast */
        border-radius: 12px !important;
        padding: 1.25em !important;
        margin: 1.5em 0 !important;
        border: 1px solid rgba(0,0,0,0.06);
      }
      body.dark .wmde-markdown pre {
        background-color: #151516 !important;
        border: 1px solid rgba(255,255,255,0.1);
      }
      .wmde-markdown code {
        background-color: rgba(0, 113, 227, 0.08) !important;
        color: #0071e3 !important;
        padding: 0.2em 0.4em !important;
        border-radius: 6px !important;
        font-family: "SF Mono", Menlo, Monaco, Consolas, monospace !important;
        font-size: 0.9em !important;
        border: 1px solid rgba(0, 113, 227, 0.1);
      }
      .wmde-markdown pre code {
        background-color: transparent !important;
        color: inherit !important;
        padding: 0 !important;
        border: none !important;
      }

      /* Blockquotes */
      .wmde-markdown blockquote {
        margin: 1.5em 0 !important;
        padding: 1em 1.5em !important;
        border-left: 4px solid var(--apple-blue) !important;
        background-color: rgba(0, 113, 227, 0.04) !important;
        border-radius: 0 12px 12px 0 !important;
        color: var(--apple-gray) !important;
        font-style: italic;
        border: 1px solid rgba(0, 113, 227, 0.05); /* Subtle border */
      }
      body.dark .wmde-markdown blockquote {
        background-color: rgba(0, 113, 227, 0.15) !important;
        color: #a1a1a6 !important;
        border: none;
      }

      /* Lists */
      .wmde-markdown ul, .wmde-markdown ol {
        padding-left: 1.5em !important;
        margin-bottom: 1.5em !important;
      }
      .wmde-markdown li {
        margin-bottom: 0.5em !important;
        padding-left: 0.5em !important;
      }
      
      /* Images */
      .wmde-markdown img {
        border-radius: 12px !important;
        box-shadow: 0 4px 12px rgba(0,0,0,0.08) !important;
        display: block !important;
        margin: 2em auto !important;
        max-width: 100% !important;
        border: 1px solid rgba(0,0,0,0.05);
      }

      /* Tables */
      .wmde-markdown table {
        display: table !important;
        width: 100% !important;
        border-collapse: separate !important;
        border-spacing: 0 !important;
        border-radius: 12px !important;
        overflow: hidden !important;
        border: 1px solid rgba(0,0,0,0.12) !important;
        margin: 2em 0 !important;
        box-shadow: 0 2px 4px rgba(0,0,0,0.02);
      }
      body.dark .wmde-markdown table { border-color: rgba(255,255,255,0.1) !important; }
      
      .wmde-markdown th, .wmde-markdown td {
        padding: 12px 16px !important;
        border-bottom: 1px solid rgba(0,0,0,0.08) !important;
        border-right: 1px solid rgba(0,0,0,0.08) !important;
      }
      body.dark .wmde-markdown th, body.dark .wmde-markdown td {
        border-color: rgba(255,255,255,0.05) !important;
      }
      .wmde-markdown th {
        background-color: rgba(0,0,0,0.03) !important;
        font-weight: 600 !important;
      }
      body.dark .wmde-markdown th { background-color: rgba(255,255,255,0.05) !important; }
      
      .wmde-markdown tr:last-child td { border-bottom: none !important; }
      .wmde-markdown tr td:last-child, .wmde-markdown tr th:last-child { border-right: none !important; }

      /* Links */
      .wmde-markdown a {
        color: var(--apple-blue) !important;
        text-decoration: none !important;
        transition: opacity 0.2s;
        font-weight: 500;
        border-bottom: 1px solid rgba(0, 113, 227, 0.3);
      }
      .wmde-markdown a:hover {
        border-bottom-color: var(--apple-blue);
        opacity: 0.8;
      }
    </style>
  <script type="importmap">
{
  "imports": {
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react-router-dom": "https://aistudiocdn.com/react-router-dom@^7.10.0",
    "lucide-react": "https://aistudiocdn.com/lucide-react@^0.555.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.31.0",
    "@vitejs/plugin-react": "https://aistudiocdn.com/@vitejs/plugin-react@^5.1.1",
    "vite": "https://aistudiocdn.com/vite@^7.2.6",
    "zod": "https://aistudiocdn.com/zod@^3.22.4",
    "react-dom": "https://aistudiocdn.com/react-dom@^19.2.1",
    "three": "https://esm.sh/three@^0.182.0",
    "gsap": "https://esm.sh/gsap@^3.14.1",
    "@uiw/react-md-editor": "https://esm.sh/@uiw/react-md-editor@4.0.4?bundle&external=react,react-dom"
  }
}
</script>
</head>
  <body class="bg-apple-bg text-apple-text antialiased selection:bg-apple-blue selection:text-white dark:bg-apple-dark-bg dark:text-apple-dark-text">
    <div id="root"></div>
  </body>
</html>